---
layout: post
title: Mastering LINQ
tags:
- Challenge
- LINQ
- Programming
status: publish
type: post
published: true
meta: {}
---
<p><a href="http://www.tekpub.com/preview/linq">Mastering LINQ</a> is a new series on Tekpub.com, the Rob Conery site with, yet few, but very interesting screencast about new technologies.</p>  <p>&#160;</p>  <p>The host of Mastering LINQ, Justin Etheredge,&#160; posted a challenge on his <a href="http://www.codethinked.com/post/2010/01/08/TekPubs-Mastering-LINQ-Challenge.aspx">site</a>&#160; promising the first five people to code a LINQ&#160; query returning all primes of a sequence a single Tekpub screencast of choice.</p>  <p>&#160;</p>  <p>I gave it a try! It is really easy:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:d21be6a0-e3d1-48a3-a263-550ce944435f" class="wlWriterEditableSmartContent"><pre name="code" class="c#">var n = 100;
var primes = Enumerable.Range(1, n)
    .Where(i =&gt; i &gt; 1)
    .Where(i =&gt;
               {
                   for (int j = 2; j &lt;= Math.Sqrt(i); j++)
                   {
                       if (i%j == 0)
                           return false;
                   }
                   return true;
               }
    );</pre></div>

<p>&#160;</p>

<p>Having a yearly subscription of Tekpub I don’t really need the price. I will give it away to some co-worker probably.</p>

<p>UPDATE:</p>

<p>The closure inside the where function could also be formulated using the “Range” and “All” method of the (I)Enumerable:</p>

<div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:1a7cd1f3-bd26-4e03-b6b1-3974685c4bc7" class="wlWriterEditableSmartContent"><pre name="code" class="c#">var primes2 = Enumerable.Range(1, n)
    .Where(i =&gt; i &gt; 1)
    .Where(i =&gt; Enumerable
                    .Range(2, (int) Math.Sqrt(i) - 1)
                    .All(mod =&gt; i%mod != 0)
    );</pre></div>
